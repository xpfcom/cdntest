<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>iTxGoğŸƒ</title>
<style>
  body {
    margin: 0;
    background: #f3f4f6;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .segments {
    display: flex;
    gap: 10px;
    transform: scale(1);
    transition: 
      transform 0.6s cubic-bezier(0.22, 1, 0.36, 1),
      opacity 0.6s linear 0.1s,
      filter 0.6s ease;
  }
  .segments.fade-out {
    transform: scale(1.8);
    opacity: 0;
    filter: blur(8px);
  }
  .segment {
    width: 28px;
    height: 16px;
    border-radius: 4px;
    animation: light 1s infinite ease-in-out;
  }
  /* çº¯è‰²é…è‰²ï¼ˆå‚è€ƒæˆªå›¾ï¼‰ */
  .segment:nth-child(1) { background: #6366f1; animation-delay: 0s; }     /* ç´«è“ */
  .segment:nth-child(2) { background: #ec4899; animation-delay: 0.2s; }  /* ç²‰çº¢ */
  .segment:nth-child(3) { background: #0ea5e9; animation-delay: 0.4s; }  /* å¤©è“ */
  .segment:nth-child(4) { background: #10b981; animation-delay: 0.6s; }  /* ç»¿è‰² */
  .segment:nth-child(5) { background: #f59e0b; animation-delay: 0.8s; }  /* æ©™é»„ */

  @keyframes light {
    0%,100% { opacity: 0.4; }
    50% { opacity: 1; }
  }
</style>
</head>
<body>
<div class="segments" id="loader">
  <div class="segment"></div>
  <div class="segment"></div>
  <div class="segment"></div>
  <div class="segment"></div>
  <div class="segment"></div>
</div>

<script>
const URLS=['https://itxgo.com','https://wllgo.com','https://381661.xyz'];
const TIMEOUT=5000;

function probe(url){
  return new Promise((resolve)=>{
    const start=performance.now();
    const img=new Image();
    img.crossOrigin = "anonymous"; // é¿å…è·¨åŸŸé”™è¯¯
    img.src=url+'/favicon.ico?cb='+Date.now();
    let done=false;
    const finish=(ok)=>{
      if(done) return;
      done=true;
      console.log(`æ£€æµ‹ ${url} ç»“æœ: ${ok ? "å¯ç”¨" : "ä¸å¯ç”¨"}`);
      resolve({url,ok,time:ok?performance.now()-start:Infinity});
    };
    img.onload=()=>finish(true);
    img.onerror=()=>finish(false);
    setTimeout(()=>finish(false),TIMEOUT);
  });
}

(async()=>{
  console.log("å¼€å§‹æµ‹é€Ÿ...");
  const results=await Promise.all(URLS.map(probe));
  const ok=results.filter(r=>r.ok);
  const target=ok.length ? ok.sort((a,b)=>a.time-b.time)[0].url : URLS[0];
  console.log("å³å°†è·³è½¬åˆ°:", target);

  const loader=document.getElementById('loader');
  loader.classList.add('fade-out');

  // è·³è½¬ï¼ˆåŠ¨ç”» 0.6s + å»¶è¿Ÿ 0.1sï¼‰
  setTimeout(()=>{ 
    window.location.href=target; 
  }, 700);
})();
</script>
</body>
</html>
